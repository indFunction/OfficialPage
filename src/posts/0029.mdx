---
thumbnail: '/media/thumbnails/general/terminal.png'
title: 'Linuxを用いてボリュームを抹消する'
description: 'ライブOSからボリュームのデータを復元不可能します。'
date: [2022, 7, 2]
category: 'memo'
keywords: ['Linux', 'Ubuntu', 'コマンド', 'ボリューム', 'メディア', '削除', '抹消', '完全']
---

　私は秘密主義…というよりも足跡を残すのが嫌いなので、頻繁にコンピューターの内部ボリュームや外部記憶装置を初期化します。しかし皆様も存じているように、ファイルをゴミ箱に入れたりOSを初期化してもデータの復元は容易に行えてしまいます。

　そこで大きく活躍するのがライブOSです。USBメモリーやCDから起動するOSを用いることで内部ボリューム―乃至―外部記憶装置を編集することができるのですが、特にLinuxでは標準でデータを完全に削除する機能が搭載されているため、今回は一般的な方法としてLinuxを用いたボリュームの抹消方法を紹介します。なお、一歩でも間違えると取り返しのつかない事態になるので、くれぐれも**操作は慎重に**お願いします。

## ライブOSを起動する

　それでは、まずは操作を行うためにライブOSを準備／起動しましょう。ちなみに、以下の説明はマジで**参考になりません**のでご注意ください。

<br />

1. USBメモリーやCDにライブOS（今回はLinux）を焼きます。方法については各自でググるようにお願いします。ちなみに私がお勧めするOSは<Link href='https://ubuntustudio.org/'>Ubuntu Studio</Link>です♡

<br />

2. Linuxがインストールされたデバイスをコンピューターに接続し、起動設定などを変更してライブOSを立ち上げます。これもまた機種や制御プログラムによって方法が異なるので、何とかして方法を見つけてください。

## データを復元不可能にする

　そもそも、ファイルが復元されてしまう原因はファイル管理システム（FATやiノード）がファイルの実体を削除しないからです。ファイルの情報だけを削除することで高速なファイル処理を実現しているわけですが、それは今回のような短所にも成り得ります。

　また、単純にファイルの実体を削除（0で上書きする）することは油断です。HDDであればディスクの磁気を精密に読み取ることで復元でき、SSDの場合は機種によって実体の削除がそもそも不可能（耐久性を優先するため、SSDの制御チップが実体を**削除したことにする**仕組み）だったりします。

　その為、以下に記したボリュームの全体領域／空き領域の正しい抹消方法でデータを復元不可能にします。

### ボリュームの全体領域を完全に削除する

　全てのデータを削除する場合、ファイルを抹消する`shred`コマンドを応用してボリュームの抹消を行います。ボリュームの他にパーティションを指定することも可能です。抹消するディスク名：ボリュームのディレクトリー（`/dev/sda`など）については`lsblk -O`などで調べましょう。メジャーなオプションについても以下の表を参考にどうぞ。

<Code type='Terminal'>
&#036; sudo shred -vz <ST type={['yellow_tc']}>&lt;ディスク&gt;</ST>
</Code>

| オプション | 内容 |
| :--- | :--- |
| `-u` | 作業完了後にファイルを削除します。 |
| `-v` | 進捗状況を表示します。 |
| `-n` | 乱数を書き込む回数を指定します。指定しない場合、デフォルトは3回です。 |
| `-z` | 最後にゼロ塗りを行います。 |

### ボリュームの空き領域を完全に削除する

　データではなく、今までに削除したデータ（実体だけが残ってしまっているゴースト・データ）やSSD（≠HDD）を完全に抹消する場合は、ダミーファイルを作成する`dd`コマンドを用いてボリュームの抹消を行います。なお、<ST type={['red_tc']}>**ルート・ファイル・システム（OSのデータが入っているボリュームの`/`）上では絶対に実行しないでください！**</ST>　システムが壊れます♨

<br />

1. `df`コマンドで対象の空き領域の容量を調べます。

<Code type='Terminal'>
&#036; df
</Code>

<br />

2. ダミーファイルを作成するディレクトリーに移動します。場所については`df`コマンドの`マウント位置`を参考にしましょう。

<Code type='Terminal'>
&#036; cd <ST type={['yellow_tc']}>&lt;ディレクトリー&gt;</ST>
</Code>

<br />

3. `dd`コマンドでダミーファイルを作成します。

<Code type='Terminal'>
&#036; sudo dd if=/dev/zero of=tempfile bs=1k count=<ST type={['yellow_tc']}>&lt;空き領域の容量&gt;</ST>
</Code>

<br />

4. ダミーファイルの作成が完了したら削除します。

<Code type='Terminal'>
&#036; sudo shred -uvz tempfile
</Code>
